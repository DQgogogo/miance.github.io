<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>儿童及青少年个性倾向探索问卷 (勉策心理)</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 20px auto;
            padding: 0 20px;
            background-color: #f9f9f9;
        }
        .container {
            background-color: #fff;
            padding: 25px 30px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        h1, h2, h3 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        h3 small {
            color: #e74c3c;
            font-weight: normal;
        }
        .warning {
            background-color: #fffbe6;
            border: 1px solid #ffe58f;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .warning-title {
            font-weight: bold;
            color: #d46b08;
        }
        .question-group {
            margin-bottom: 25px;
        }
        .question-title {
            font-weight: bold;
            margin-bottom: 10px;
        }
        .options {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin-top: 5px;
        }
        .options label {
            margin: 5px 10px;
            cursor: pointer;
        }
        .checkbox-group label {
            display: block;
            margin: 8px 0;
            cursor: pointer;
            padding-left: 5px;
        }
        .info-field {
            margin-bottom: 15px;
        }
        .info-field label {
            display: inline-block;
            width: 100px;
            font-weight: bold;
        }
        .info-field input, .info-field select {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            width: calc(100% - 120px);
        }
        button {
            display: block;
            width: 100%;
            padding: 12px;
            font-size: 1.2em;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #2980b9;
        }
        #results {
            margin-top: 30px;
            padding: 20px;
            background-color: #eaf5ff;
            border: 2px solid #b3d9ff;
            border-radius: 5px;
            display: none; /* Initially hidden */
        }
        #results ul {
            list-style-type: none;
            padding-left: 0;
        }
        #results li {
            background-color: #fff;
            margin-bottom: 8px;
            padding: 10px;
            border-radius: 4px;
        }
        .qr-section {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        .qr-section img {
            max-width: 180px;
            height: auto;
            margin-top: 10px;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>儿童及青少年个性倾向探索问卷</h1>
        <h2>(勉策心理)</h2>

        <div class="warning">
            <p class="warning-title">⚠️ 开篇的重要提醒（请务必仔细阅读）</p>
            <ul>
                <li><strong>本问卷结果仅供参考。</strong>其主要目的是为了增进亲子理解与沟通。</li>
                <li>儿童及青少年的人格处于持续发展和变化中，<strong>请勿用结果给孩子贴上标签</strong>。</li>
                <li>每一种个性倾向都有其独特的优势和价值，结果没有好坏之分。</li>
                <li>本页面所有信息仅在您的浏览器中处理，<strong>不会上传至任何服务器</strong>，确保您的隐私安全。</li>
                <li><strong>我们不储存信息，记得将最后的评测结果截图发给老师！</strong></li>
            </ul>
        </div>

        <form id="personalityQuiz">
            <h3>一、 孩子的基本信息</h3>
            <div class="info-field">
                <label for="childName">孩子姓名:</label>
                <input type="text" id="childName" name="childName" required>
            </div>
            <div class="info-field">
                <label for="birthDate">出生时间:</label>
                <input type="date" id="birthDate" name="birthDate" required>
            </div>
            <div class="info-field">
                <label for="gender">性别:</label>
                <select id="gender" name="gender" required>
                    <option value="">请选择</option>
                    <option value="male">男</option>
                    <option value="female">女</option>
                </select>
            </div>
            <div class="info-field">
                <label for="birthOrder">家中排行:</label>
                <select id="birthOrder" name="birthOrder" required>
                    <option value="">请选择</option>
                    <option value="only_child">独生子女</option>
                    <option value="eldest">老大</option>
                    <option value="middle">中间</option>
                    <option value="youngest">老幺</option>
                </select>
            </div>


            <h3>二、 个性倾向探索</h3>
            
            <h4>第一部分：我如何与世界互动和获取能量</h4>
            <div class="question-group">
                <p class="question-title">1. 在周末或空闲时间，我通常感觉……<br><small>(A) 和朋友们一起热闹地玩耍，能让我更有精神。 (B) 一个人安安静静地看书、画画或做我喜欢的事，更能让我放松。</small></p>
                <div class="options">
                    <label><input type="radio" name="q1" value="A2" required> 非常像A</label>
                    <label><input type="radio" name="q1" value="A1"> 比较像A</label>
                    <label><input type="radio" name="q1" value="M0"> 介于中间</label>
                    <label><input type="radio" name="q1" value="B1"> 比较像B</label>
                    <label><input type="radio" name="q1" value="B2"> 非常像B</label>
                </div>
            </div>
            <div class="question-group">
                 <p class="question-title">2. 在一个小组或派对里，我更可能是……<br><small>(A) 很容易就和大家聊起来，积极分享我的想法。 (B) 先在一旁静静地观察和倾听，想清楚了再说。</small></p>
                <div class="options">
                    <label><input type="radio" name="q2" value="A2" required> 非常像A</label>
                    <label><input type="radio" name="q2" value="A1"> 比较像A</label>
                    <label><input type="radio" name="q2" value="M0"> 介于中间</label>
                    <label><input type="radio" name="q2" value="B1"> 比较像B</label>
                    <label><input type="radio" name="q2" value="B2"> 非常像B</label>
                </div>
            </div>
            <div class="question-group">
                <p class="question-title">3. 在参加完一次热闹的社交活动后，我通常……<br><small>(A) 感觉很兴奋，还想继续玩。 (B) 感觉有点累，需要自己待一会儿来恢复精力。</small></p>
                <div class="options">
                    <label><input type="radio" name="q3" value="A2" required> 非常像A</label>
                    <label><input type="radio" name="q3" value="A1"> 比较像A</label>
                    <label><input type="radio" name="q3" value="M0"> 介于中间</label>
                    <label><input type="radio" name="q3" value="B1"> 比较像B</label>
                    <label><input type="radio" name="q3" value="B2"> 非常像B</label>
                </div>
            </div>

            <h4>第二部分：我如何看待信息和学习新知</h4>
            <div class="question-group">
                <p class="question-title">4. 当学习一个新游戏或新知识时，我更喜欢……<br><small>(A) 老师或说明书给出清晰、具体的步骤，我按部就班地操作。 (B) 先了解大概的意思和最终目标，然后自己去探索和尝试各种可能性。</small></p>
                <div class="options">
                    <label><input type="radio" name="q4" value="A2" required> 非常像A</label>
                    <label><input type="radio" name="q4" value="A1"> 比较像A</label>
                    <label><input type="radio" name="q4" value="M0"> 介于中间</label>
                    <label><input type="radio" name="q4" value="B1"> 比较像B</label>
                    <label><input type="radio" name="q4" value="B2"> 非常像B</label>
                </div>
            </div>
             <div class="question-group">
                <p class="question-title">5. 对于故事或电影，我更感兴趣的是……<br><small>(A) 真实发生过的事情或贴近生活的情节。 (B) 充满奇特想象、未来幻想或有深刻寓意的情节。</small></p>
                <div class="options">
                    <label><input type="radio" name="q5" value="A2" required> 非常像A</label>
                    <label><input type="radio" name="q5" value="A1"> 比较像A</label>
                    <label><input type="radio" name="q5" value="M0"> 介于中间</label>
                    <label><input type="radio" name="q5" value="B1"> 比较像B</label>
                    <label><input type="radio" name="q5" value="B2"> 非常像B</label>
                </div>
            </div>
             <div class="question-group">
                <p class="question-title">6. 当我向别人描述一件事情时，我更倾向于……<br><small>(A) 说清楚事情发生的具体细节，比如谁、在何时、何地、做了什么。 (B) 更多地描述这件事给我的整体感觉，以及它让我想到了什么。</small></p>
                <div class="options">
                    <label><input type="radio" name="q6" value="A2" required> 非常像A</label>
                    <label><input type="radio" name="q6" value="A1"> 比较像A</label>
                    <label><input type="radio" name="q6" value="M0"> 介于中间</label>
                    <label><input type="radio" name="q6" value="B1"> 比较像B</label>
                    <label><input type="radio" name="q6" value="B2"> 非常像B</label>
                </div>
            </div>
            
            <h4>第三部分：我如何做决定</h4>
             <div class="question-group">
                <p class="question-title">7. 当好朋友遇到问题向我求助时，我的第一反应是……<br><small>(A) 帮他分析问题出在哪里，思考怎样做最公平、最符合逻辑。 (B) 先关心他的感受，安慰他，思考怎样做能让他感觉好一些。</small></p>
                <div class="options">
                    <label><input type="radio" name="q7" value="A2" required> 非常像A</label>
                    <label><input type="radio" name="q7" value="A1"> 比较像A</label>
                    <label><input type="radio" name="q7" value="M0"> 介于中间</label>
                    <label><input type="radio" name="q7" value="B1"> 比较像B</label>
                    <label><input type="radio" name="q7" value="B2"> 非常像B</label>
                </div>
            </div>
             <div class="question-group">
                <p class="question-title">8. 如果有人批评我，我更容易……<br><small>(A) 首先思考：“他说得对不对？有没有道理？” (B) 首先感觉到难过或受伤，很在意对方说话的语气和态度。</small></p>
                <div class="options">
                    <label><input type="radio" name="q8" value="A2" required> 非常像A</label>
                    <label><input type="radio" name="q8" value="A1"> 比较像A</label>
                    <label><input type="radio" name="q8" value="M0"> 介于中间</label>
                    <label><input type="radio" name="q8" value="B1"> 比较像B</label>
                    <label><input type="radio" name="q8" value="B2"> 非常像B</label>
                </div>
            </div>
             <div class="question-group">
                <p class="question-title">9. 在一个小组里需要做决定时，我认为更重要的是……<br><small>(A) 做出一个最正确、最高效的决定，即使有人会不高兴。 (B) 确保大家都参与进来，尽量让每个人都感到被尊重和满意。</small></p>
                <div class="options">
                    <label><input type="radio" name="q9" value="A2" required> 非常像A</label>
                    <label><input type="radio" name="q9" value="A1"> 比较像A</label>
                    <label><input type="radio" name="q9" value="M0"> 介于中间</label>
                    <label><input type="radio" name="q9" value="B1"> 比较像B</label>
                    <label><input type="radio" name="q9" value="B2"> 非常像B</label>
                </div>
            </div>
            
            <h4>第四部分：我喜欢怎样的生活方式</h4>
            <div class="question-group">
                <p class="question-title">10. 对于一个周末计划或假期安排，我更喜欢……<br><small>(A) 提前把要做的事情、去哪里都安排得明明白白。 (B) 只定一个大概的方向，到时候看心情和情况再决定。</small></p>
                <div class="options">
                    <label><input type="radio" name="q10" value="A2" required> 非常像A</label>
                    <label><input type="radio" name="q10" value="A1"> 比较像A</label>
                    <label><input type="radio" name="q10" value="M0"> 介于中间</label>
                    <label><input type="radio" name="q10" value="B1"> 比较像B</label>
                    <label><input type="radio" name="q10" value="B2"> 非常像B</label>
                </div>
            </div>
             <div class="question-group">
                <p class="question-title">11. 对于学校的规则和作业的截止日期，我的态度是……<br><small>(A) 认为它们很重要，会努力遵守和按时完成，这样让我有安全感。 (B) 觉得它们有时会有点烦人，我更喜欢按照自己的节奏来。</small></p>
                <div class="options">
                    <label><input type="radio" name="q11" value="A2" required> 非常像A</label>
                    <label><input type="radio" name="q11" value="A1"> 比较像A</label>
                    <label><input type="radio" name="q11" value="M0"> 介于中间</label>
                    <label><input type="radio" name="q11" value="B1"> 比较像B</label>
                    <label><input type="radio" name="q11" value="B2"> 非常像B</label>
                </div>
            </div>
             <div class="question-group">
                <p class="question-title">12. 我的书桌或房间通常是……<br><small>(A) 东西都摆放得整整齐齐，用完会放回原位。 (B) 可能会有点乱，但我自己知道东西在哪，我喜欢这种随意的感觉。</small></p>
                <div class="options">
                    <label><input type="radio" name="q12" value="A2" required> 非常像A</label>
                    <label><input type="radio" name="q12" value="A1"> 比较像A</label>
                    <label><input type="radio" name="q12" value="M0"> 介于中间</label>
                    <label><input type="radio" name="q12" value="B1"> 比较像B</label>
                    <label><input type="radio" name="q12" value="B2"> 非常像B</label>
                </div>
            </div>
            
            <h4>第五部分：我的内心深处在追求什么</h4>
            <div class="question-group checkbox-group">
                <p class="question-title">请仔细阅读，并选出最像你的2-3项。</p>
                <label><input type="checkbox" name="q13" value="1"> (1) 我总是想把作业写得工工整整，不喜欢别人做事马虎。</label>
                <label><input type="checkbox" name="q13" value="2"> (2) 看到朋友不开心，我会主动去安慰他，帮他解决问题。</label>
                <label><input type="checkbox" name="q13" value="3"> (3) 我喜欢在比赛中获胜，或者当我的作品被表扬时会非常开心。</label>
                <label><input type="checkbox" name="q13" value="4"> (4) 我不喜欢和别人穿一样的衣服，我有时候会觉得没人真正懂我心里的感觉。</label>
                <label><input type="checkbox" name="q13" value="5"> (5) 我喜欢把玩具拆开看看里面是什么样的，或者花很长时间研究我感兴趣的东西。</label>
                <label><input type="checkbox" name="q13" value="6"> (6) 到一个新环境前，我总想先了解清楚规则，对于不确定的事会有点担心。</label>
                <label><input type="checkbox" name="q13" value="7"> (7) 我总是有很多新奇的想法，喜欢尝试不同的活动，讨厌无聊。</label>
                <label><input type="checkbox" name="q13" value="8"> (8) 如果看到有人被欺负，我可能会是第一个站出来的。</label>
                <label><input type="checkbox" name="q13" value="9"> (9) 如果朋友们吵架了，我会觉得很难受，希望他们赶快和好。</label>
            </div>

            <h4>第六部分：综合交叉验证</h4>
             <div class="question-group checkbox-group">
                <p class="question-title">对我来说，最重要的事情是…… (请选出最重要的1-2项)</p>
                <label><input type="checkbox" name="q14" value="1"> A. 做正确的事，把事情做好。</label>
                <label><input type="checkbox" name="q14" value="2"> B. 被人喜欢和接纳，与他人建立温暖的关系。</label>
                <label><input type="checkbox" name="q14" value="3"> C. 获得成功，让他人看到我的价值。</label>
                <label><input type="checkbox" name="q14" value="4"> D. 做独一无二的自己，被深刻地理解。</label>
                <label><input type="checkbox" name="q14" value="5"> E. 弄懂这个世界，获得更多的知识。</label>
                <label><input type="checkbox" name="q14" value="6"> F. 感到安全和有所准备。</label>
                <label><input type="checkbox" name="q14" value="7"> G. 体验快乐，对未来充满期待。</label>
                <label><input type="checkbox" name="q14" value="8"> H. 掌控自己的生活，保护我在乎的人。</label>
                <label><input type="checkbox" name="q14" value="9"> I. 保持内心的平静，与大家和谐相处。</label>
            </div>

            <button type="submit">查看结果</button>
        </form>

        <div id="results">
            <h3 id="resultHeader"></h3>
            <div id="resultText"></div>
        </div>

        <div class="qr-section">
            <h4>咨询与深入解读</h4>
            <p>请将评估结果截图发给老师。<br>孩子更深入的个性化解读和成长建议，<br>↓↓↓ <strong>请扫描下方二维码联系老师进行咨询 ↓↓↓</strong></p>
            <img src="your-qr-code.png" alt="联系老师二维码">
        </div>
    </div>

    <script>
        document.getElementById('personalityQuiz').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent the form from submitting the traditional way

            // --- Basic Info ---
            const childNameInput = document.getElementById('childName');
            const birthDateInput = document.getElementById('birthDate');
            const genderSelect = document.getElementById('gender');
            const birthOrderSelect = document.getElementById('birthOrder');
            
            const childName = childNameInput.value;
            const birthDate = birthDateInput.value;
            const gender = genderSelect.options[genderSelect.selectedIndex].text;
            const birthOrder = birthOrderSelect.options[birthOrderSelect.selectedIndex].text;

            if (!childName || !birthDate || !genderSelect.value || !birthOrderSelect.value) {
                alert('请填写完整的“孩子的基本信息”。');
                return;
            }

            // --- Enneagram Checkbox Validation ---
            const q13Checked = document.querySelectorAll('input[name="q13"]:checked').length;
            if (q13Checked < 2 || q13Checked > 3) {
                alert('在“第五部分”中，请不多不少，刚好选择2-3项。');
                return;
            }
            const q14Checked = document.querySelectorAll('input[name="q14"]:checked').length;
            if (q14Checked < 1 || q14Checked > 2) {
                alert('在“第六部分”中，请刚好选择1-2项。');
                return;
            }

            // --- MBTI Scoring ---
            const scores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
            const mbtiGroups = {
                EI: ['q1', 'q2', 'q3'],
                SN: ['q4', 'q5', 'q6'],
                TF: ['q7', 'q8', 'q9'],
                JP: ['q10', 'q11', 'q12']
            };

            for (const group in mbtiGroups) {
                mbtiGroups[group].forEach(q => {
                    const val = document.querySelector(`input[name="${q}"]:checked`).value;
                    const type = val.charAt(0);
                    const score = parseInt(val.charAt(1));
                    if (type === 'A') {
                        scores[group.charAt(0)] += score;
                    } else if (type === 'B') {
                        scores[group.charAt(1)] += score;
                    }
                });
            }

            let mbtiResult = '';
            mbtiResult += scores.E >= scores.I ? 'E' : 'I';
            mbtiResult += scores.S >= scores.N ? 'S' : 'N';
            mbtiResult += scores.T >= scores.F ? 'T' : 'F';
            mbtiResult += scores.J >= scores.P ? 'J' : 'P';
            
            const mbtiBalance = {
                EI: Math.abs(scores.E - scores.I) < 2 ? '(倾向均衡)' : '',
                SN: Math.abs(scores.S - scores.N) < 2 ? '(倾向均衡)' : '',
                TF: Math.abs(scores.T - scores.F) < 2 ? '(倾向均衡)' : '',
                JP: Math.abs(scores.J - scores.P) < 2 ? '(倾向均衡)' : ''
            };

            // --- Enneagram Scoring ---
            const enneagramCounts = {};
            const q13Selections = document.querySelectorAll('input[name="q13"]:checked');
            q13Selections.forEach(cb => {
                enneagramCounts[cb.value] = (enneagramCounts[cb.value] || 0) + 1.5; // Main questions get higher weight
            });
            
            const q14Selections = document.querySelectorAll('input[name="q14"]:checked');
            q14Selections.forEach(cb => {
                enneagramCounts[cb.value] = (enneagramCounts[cb.value] || 0) + 1; // Validation questions
            });

            let mainEnneagramTypes = [];
            let maxCount = 0;
            for (const type in enneagramCounts) {
                if (enneagramCounts[type] > maxCount) {
                    maxCount = enneagramCounts[type];
                }
            }
            for (const type in enneagramCounts) {
                 if (enneagramCounts[type] >= maxCount && maxCount > 0) {
                    mainEnneagramTypes.push(type);
                }
            }
            
            // --- Display Results ---
            const resultDiv = document.getElementById('results');
            const resultHeader = document.getElementById('resultHeader');
            const resultTextDiv = document.getElementById('resultText');
            
            resultHeader.innerHTML = `探索结果 <small>(请将以下完整结果截图发给老师)</small>`;
            
            let resultHTML = `<h4>基本信息</h4>`;
            resultHTML += `<ul>`;
            resultHTML += `<li><strong>姓名:</strong> ${childName}</li>`;
            resultHTML += `<li><strong>出生日期:</strong> ${birthDate}</li>`;
            resultHTML += `<li><strong>性别:</strong> ${gender}</li>`;
            resultHTML += `<li><strong>家中排行:</strong> ${birthOrder}</li>`;
            resultHTML += `</ul><hr>`;
            
            resultHTML += `<h4>行为模式倾向 (MBTI): ${mbtiResult}</h4>`;
            resultHTML += `<ul>`;
            resultHTML += `<li><strong>精力来源:</strong> ${mbtiResult.charAt(0)}型 (E: ${scores.E}分, I: ${scores.I}分) ${mbtiBalance.EI}</li>`;
            resultHTML += `<li><strong>认知方式:</strong> ${mbtiResult.charAt(1)}型 (S: ${scores.S}分, N: ${scores.N}分) ${mbtiBalance.SN}</li>`;
            resultHTML += `<li><strong>决策方式:</strong> ${mbtiResult.charAt(2)}型 (T: ${scores.T}分, F: ${scores.F}分) ${mbtiBalance.TF}</li>`;
            resultHTML += `<li><strong>生活方式:</strong> ${mbtiResult.charAt(3)}型 (J: ${scores.J}分, P: ${scores.P}分) ${mbtiBalance.JP}</li>`;
            resultHTML += `</ul>`;
            
            resultHTML += `<h4>核心动机倾向 (九型人格)</h4>`;
            resultHTML += `<p>你(孩子)内心的核心需求最可能与 <strong>${mainEnneagramTypes.join('号、')}号</strong> 人格的特点产生共鸣。</p>`;
            
            resultHTML += `<hr><p><strong>重要提醒：</strong>此结果是基于您当前选择的初步分析，旨在启发思考和对话。孩子的成长是动态的，请将此作为一个了解的窗口，而非一个静态的标签。</p>`;

            resultTextDiv.innerHTML = resultHTML;
            resultDiv.style.display = 'block';
            resultDiv.scrollIntoView({ behavior: 'smooth' });
        });
    </script>
</body>
</html>